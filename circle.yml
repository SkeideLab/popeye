## Customize the test machine on circleci
machine: 
    timezone:
        America/New_York
    python:
        version:
            2.7.6
    environment:
        CIRCLE_ENV: test
        COVERAGE: 1
    
## Customize dependencies
dependencies:
    pre:
        - pip install nose
        - pip install pillow
        - pip install numpy
        - pip install nibabel
        - pip install cython
        - pip install scipy
        - sudo apt-get install python-matplotlib
        - pip install git+git://github.com/rainwoodman/sharedmem
        - pip install coverage
        - pip install coveralls
        - sudo mkdir tests_dir
        - sudo cp .coveragerc tests_dir/.coveragerc
        - sudo cp .coveragerc tests_dir/.coverage

## Customize the tests
test:
    pre:
        - COVER_ARGS="--with-coverage --cover-package popeye"
    override:
        - nosetests --with-doctest --verbose $COVER_ARGS popeye
            pwd:
                tests_dir
    post:
        - coveralls
        